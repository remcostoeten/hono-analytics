---
title: React Integration
description: HONO Analytics SDK for React and Next.js applications
---

# React Integration

The HONO Analytics SDK provides seamless integration with React and Next.js applications using a context provider pattern.

## Installation

```bash
npm install @hono-analytics/sdk
# or
pnpm add @hono-analytics/sdk
# or  
yarn add @hono-analytics/sdk
```

## Setup

### 1. Provider Setup

Wrap your app with the `AnalyticsProvider`:

```tsx path=null start=null
import { AnalyticsProvider } from '@hono-analytics/sdk/react'

type TProps = {
  children: React.ReactNode
}

export function App({ children }: TProps) {
  return (
    <AnalyticsProvider
      apiKey="your-api-key"
      projectId="your-project-id"
      endpoint="https://your-analytics-api.com"
      debug={process.env.NODE_ENV === 'development'}
    >
      {children}
    </AnalyticsProvider>
  )
}
```

### 2. Next.js Setup

For Next.js applications, add the provider to your root layout or `_app.tsx`:

#### App Router (Next.js 13+)

```tsx path=/app/layout.tsx start=null
import { AnalyticsProvider } from '@hono-analytics/sdk/react'

type TProps = {
  children: React.ReactNode
}

export default function RootLayout({ children }: TProps) {
  return (
    <html lang="en">
      <body>
        <AnalyticsProvider
          apiKey={process.env.NEXT_PUBLIC_ANALYTICS_API_KEY!}
          projectId={process.env.NEXT_PUBLIC_ANALYTICS_PROJECT_ID!}
          endpoint={process.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT}
          debug={process.env.NODE_ENV === 'development'}
        >
          {children}
        </AnalyticsProvider>
      </body>
    </html>
  )
}
```

#### Pages Router (Next.js 12 and below)

```tsx path=/pages/_app.tsx start=null
import { AnalyticsProvider } from '@hono-analytics/sdk/react'
import type { AppProps } from 'next/app'

type TProps = AppProps

export default function App({ Component, pageProps }: TProps) {
  return (
    <AnalyticsProvider
      apiKey={process.env.NEXT_PUBLIC_ANALYTICS_API_KEY!}
      projectId={process.env.NEXT_PUBLIC_ANALYTICS_PROJECT_ID!}
      endpoint={process.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT}
    >
      <Component {...pageProps} />
    </AnalyticsProvider>
  )
}
```

## Configuration

### Provider Props

```tsx path=null start=null
type TProps = {
  children: React.ReactNode
  apiKey: string
  projectId: string
  endpoint?: string
  ignoreAnalytics?: boolean
  debug?: boolean
}
```

| Prop | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `children` | ReactNode | Yes | - | Child components |
| `apiKey` | string | Yes | - | Your project API key |
| `projectId` | string | Yes | - | Project identifier |
| `endpoint` | string | No | `http://localhost:8000` | Backend API URL |
| `ignoreAnalytics` | boolean | No | `false` | Disable all tracking |
| `debug` | boolean | No | `false` | Enable debug logging |

### Environment Variables

Set up environment variables for different environments:

```bash path=/.env.local start=null
NEXT_PUBLIC_ANALYTICS_API_KEY=your-api-key
NEXT_PUBLIC_ANALYTICS_PROJECT_ID=your-project-id
NEXT_PUBLIC_ANALYTICS_ENDPOINT=https://analytics.example.com
```

## Usage

### Using the Hook

Use the `useAnalytics` hook in any component within the provider:

```tsx path=null start=null
import { useAnalytics } from '@hono-analytics/sdk/react'

function MyComponent() {
  const analytics = useAnalytics()
  
  async function handleButtonClick() {
    await analytics.track({
      url: '/button-clicked',
      durationMs: 500
    })
  }
  
  function handleUserLogin() {
    analytics.identify({
      id: 'user-123',
      country: 'Netherlands',
      city: 'Amsterdam'
    })
  }
  
  return (
    <div>
      <button onClick={handleButtonClick}>
        Track Button Click
      </button>
      <button onClick={handleUserLogin}>
        Identify User
      </button>
    </div>
  )
}
```

### Hook API

The `useAnalytics` hook returns an object with these methods:

#### `track(data?: Partial<TPageviewData>): Promise<void>`

Track custom events or pageviews:

```tsx path=null start=null
function ProductPage() {
  const analytics = useAnalytics()
  
  async function handlePurchase() {
    await analytics.track({
      url: '/purchase-completed',
      durationMs: 1200
    })
  }
  
  return <button onClick={handlePurchase}>Buy Now</button>
}
```

#### `identify(userData: Partial<TUserData>): void`

Identify the current user:

```tsx path=null start=null
function LoginPage() {
  const analytics = useAnalytics()
  
  async function handleLogin(userId: string) {
    analytics.identify({
      id: userId,
      country: 'Germany'
    })
  }
  
  return <LoginForm onLogin={handleLogin} />
}
```

#### `getSessionId(): string | null`

Get the current session ID:

```tsx path=null start=null
function DebugInfo() {
  const analytics = useAnalytics()
  const sessionId = analytics.getSessionId()
  
  return <div>Session: {sessionId}</div>
}
```

#### `getUserId(): string | null`

Get the current user ID:

```tsx path=null start=null
function UserInfo() {
  const analytics = useAnalytics()
  const userId = analytics.getUserId()
  
  return <div>User: {userId || 'Anonymous'}</div>
}
```

## Common Patterns

### Page View Tracking

The SDK automatically tracks the initial pageview. For additional tracking:

```tsx path=null start=null
import { useEffect } from 'react'
import { useRouter } from 'next/router'
import { useAnalytics } from '@hono-analytics/sdk/react'

function usePageTracking() {
  const analytics = useAnalytics()
  const router = useRouter()
  
  useEffect(() => {
    async function handleRouteChange() {
      await analytics.track({
        url: window.location.pathname + window.location.search
      })
    }
    
    router.events.on('routeChangeComplete', handleRouteChange)
    return () => router.events.off('routeChangeComplete', handleRouteChange)
  }, [analytics, router.events])
}

export function Layout() {
  usePageTracking()
  // ... rest of layout
}
```

### User Authentication Integration

```tsx path=null start=null
function useAuthTracking() {
  const analytics = useAnalytics()
  const { user } = useAuth()
  
  useEffect(() => {
    if (user) {
      analytics.identify({
        id: user.id,
        country: user.country,
        city: user.city
      })
    }
  }, [user, analytics])
}
```

### Event Tracking with Custom Data

```tsx path=null start=null
function EcommerceTracker() {
  const analytics = useAnalytics()
  
  async function trackPurchase(productId: string, value: number) {
    await analytics.track({
      url: `/purchase/${productId}`,
      durationMs: Date.now() - startTime
    })
  }
  
  async function trackProductView(productId: string) {
    await analytics.track({
      url: `/product-view/${productId}`
    })
  }
  
  return { trackPurchase, trackProductView }
}
```

### Conditional Tracking

```tsx path=null start=null
type TProps = {
  children: React.ReactNode
}

export function App({ children }: TProps) {
  const shouldTrack = process.env.NODE_ENV === 'production'
  
  return (
    <AnalyticsProvider
      apiKey="your-api-key"
      projectId="your-project-id"
      ignoreAnalytics={!shouldTrack}
      debug={!shouldTrack}
    >
      {children}
    </AnalyticsProvider>
  )
}
```

## TypeScript Support

The SDK provides full TypeScript support with proper type definitions:

```tsx path=null start=null
import type { TUserData, TPageviewData } from '@hono-analytics/sdk/react'

function TypedComponent() {
  const analytics = useAnalytics()
  
  const userData: TUserData = {
    id: 'user-123',
    country: 'Netherlands',
    device: 'desktop'
  }
  
  const pageviewData: TPageviewData = {
    url: '/custom-event',
    timestamp: new Date().toISOString(),
    durationMs: 2500
  }
  
  async function handleTracking() {
    analytics.identify(userData)
    await analytics.track(pageviewData)
  }
  
  return <button onClick={handleTracking}>Track Event</button>
}
```

## Error Handling

The SDK includes built-in error handling, but you can add additional error boundaries:

```tsx path=null start=null
function SafeAnalyticsComponent() {
  const analytics = useAnalytics()
  
  async function handleTrack() {
    try {
      await analytics.track({ url: '/action' })
    } catch (error) {
      console.error('Analytics tracking failed:', error)
    }
  }
  
  return <button onClick={handleTrack}>Safe Track</button>
}
```

## Development Tips

### Debug Mode

Enable debug mode during development:

```tsx path=null start=null
<AnalyticsProvider
  debug={process.env.NODE_ENV === 'development'}
  // ... other props
>
```

This will log analytics events to the browser console.

### Testing

For testing, disable analytics completely:

```tsx path=null start=null
<AnalyticsProvider
  ignoreAnalytics={process.env.NODE_ENV === 'test'}
  // ... other props
>
```

## Next Steps

<Cards>
  <Card title="Examples" href="/docs/examples" description="Common usage patterns and code examples" />
  <Card title="API Reference" href="/docs/api" description="Backend API documentation" />
  <Card title="Configuration" href="/docs/configuration" description="Environment variables and settings" />
  <Card title="Deployment" href="/docs/deployment" description="Production deployment guide" />
</Cards>
